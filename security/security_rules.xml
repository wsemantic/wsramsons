<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Acceso a la informaciÃ³n del propio usuario -->
    <record id="wsramsons_user_self_rule" model="ir.rule">
        <field name="name">[wsramsons] Usuarios: Solo su propio registro</field>
        <field name="model_id" ref="base.model_res_users"/>
        <field name="domain_force">[('id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('wsramsons.group_comercial'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
        <field name="global" eval="False"/>
        <field name="active" eval="True"/>
    </record>
	

    <record id="wsramsons_sale_order_user_rule" model="ir.rule">
        <field name="name">[wsramsons] Pedidos de venta: solo propios</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain_force">['|', ('partner_id.user_id', '=', user.id), ('partner_id.parent_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('wsramsons.group_comercial'))]"/>
    </record>

    <record id="wsramsons_account_move_user_rule" model="ir.rule">
        <field name="name">[wsramsons] Facturas: solo propias</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="domain_force">['|', ('partner_id.user_id', '=', user.id), ('partner_id.parent_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('wsramsons.group_comercial'))]"/>
    </record>

	  <!-- Ocultar el chatter solo a comerciales 
	  <record id="view_partner_form_hide_chatter_for_sales" model="ir.ui.view">
		<field name="name">res.partner.form.hide.chatter.for.sales</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="base.view_partner_form"/>
		<field name="arch" type="xml">
		  Chatter 
		  <xpath expr="//div[contains(@class,'oe_chatter')]" position="attributes">
			<attribute name="groups">wsramsons.group_all_partner</attribute>
		  </xpath>
		  Botonera de smart buttons (evita lecturas indirectas de partners ajenos)
		  <xpath expr="//div[@name='button_box']" position="attributes">
			<attribute name="groups">wsramsons.group_all_partner</attribute>
		  </xpath>
		</field>
	  </record>
	  
	  Pedidos de venta (sale.order) 
	  <record id="view_sale_order_hide_chatter_for_sales" model="ir.ui.view">
		<field name="name">sale.order.form.hide.chatter.for.sales</field>
		<field name="model">sale.order</field>
		<field name="inherit_id" ref="sale.view_order_form"/>
		<field name="arch" type="xml">
		  Ocultar chatter 
		  <xpath expr="//div[contains(@class,'oe_chatter')]" position="attributes">
			<attribute name="groups">wsramsons.group_all_partner</attribute>
		  </xpath>
		  Ocultar smart buttons
		  <xpath expr="//div[@name='button_box']" position="attributes">
			<attribute name="groups">wsramsons.group_all_partner</attribute>
		  </xpath>
		</field>
	  </record>

	  Facturas (account.move)
	  <record id="view_account_move_hide_chatter_for_sales" model="ir.ui.view">
		<field name="name">account.move.form.hide.chatter.for.sales</field>
		<field name="model">account.move</field>
		<field name="inherit_id" ref="account.view_move_form"/>
		<field name="arch" type="xml">
		  Ocultar chatter
		  <xpath expr="//div[contains(@class,'oe_chatter')]" position="attributes">
			<attribute name="groups">wsramsons.group_all_partner</attribute>
		  </xpath>
		  Ocultar smart buttons 
		  <xpath expr="//div[@name='button_box']" position="attributes">
			<attribute name="groups">wsramsons.group_all_partner</attribute>
		  </xpath>
		</field>
	  </record>-->
</odoo>
